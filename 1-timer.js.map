{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = null;\nconst button = document.querySelector('[data-start]');\nbutton.disabled = true;\nconst input = document.querySelector('#datetime-picker');\n\nconst daysSpan = document.querySelector('[data-days]');\nconst hoursSpan = document.querySelector('[data-hours]');\nconst minutesSpan = document.querySelector('[data-minutes]');\nconst secondsSpan = document.querySelector('[data-seconds]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: function (selectedDates) {\n    userSelectedDate = selectedDates[0];\n    checkDate(userSelectedDate);\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction checkDate(date) {\n  if (date.getTime() > Date.now()) {\n    button.disabled = false;\n  } else {\n    iziToast.error({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n    button.disabled = true;\n  }\n}\n\nlet clickTime = null;\nlet intervalId = null;\n\nbutton.addEventListener('click', event => {\n  clickTime = Date.now();\n  intervalId = setInterval(goTime, 1000);\n  input.disabled = true;\n  button.disabled = true;\n});\n\nfunction goTime() {\n  const res = userSelectedDate - Date.now();\n  if (res <= 0) {\n    clearInterval(intervalId);\n    input.disabled = false;\n    iziToast.success({\n      message: 'Time is out!',\n      position: 'bottomRight',\n    });\n    return;\n  }\n  const { days, hours, minutes, seconds } = convertMs(res);\n  updateTimer({ days, hours, minutes, seconds });\n}\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  daysSpan.textContent = addLeadingZero(days);\n  hoursSpan.textContent = addLeadingZero(hours);\n  minutesSpan.textContent = addLeadingZero(minutes);\n  secondsSpan.textContent = addLeadingZero(seconds);\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["userSelectedDate","button","input","daysSpan","hoursSpan","minutesSpan","secondsSpan","options","selectedDates","checkDate","flatpickr","date","iziToast","intervalId","event","goTime","res","days","hours","minutes","seconds","convertMs","updateTimer","addLeadingZero","value","ms"],"mappings":"iyBAKA,IAAIA,EAAmB,KACvB,MAAMC,EAAS,SAAS,cAAc,cAAc,EACpDA,EAAO,SAAW,GAClB,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EAEjDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAS,SAAUC,EAAe,CAChCR,EAAmBQ,EAAc,CAAC,EAClCC,EAAUT,CAAgB,CAC3B,CACH,EAEAU,EAAU,mBAAoBH,CAAO,EAErC,SAASE,EAAUE,EAAM,CACnBA,EAAK,QAAO,EAAK,KAAK,IAAG,EAC3BV,EAAO,SAAW,IAElBW,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAChB,CAAK,EACDX,EAAO,SAAW,GAEtB,CAGA,IAAIY,EAAa,KAEjBZ,EAAO,iBAAiB,QAASa,GAAS,CAExCD,EAAa,YAAYE,EAAQ,GAAI,EACrCb,EAAM,SAAW,GACjBD,EAAO,SAAW,EACpB,CAAC,EAED,SAASc,GAAS,CAChB,MAAMC,EAAMhB,EAAmB,KAAK,IAAG,EACvC,GAAIgB,GAAO,EAAG,CACZ,cAAcH,CAAU,EACxBX,EAAM,SAAW,GACjBU,EAAS,QAAQ,CACf,QAAS,eACT,SAAU,aAChB,CAAK,EACD,MACD,CACD,KAAM,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAG,EACvDM,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAC/C,CAEA,SAASE,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDjB,EAAS,YAAcoB,EAAeN,CAAI,EAC1Cb,EAAU,YAAcmB,EAAeL,CAAK,EAC5Cb,EAAY,YAAckB,EAAeJ,CAAO,EAChDb,EAAY,YAAciB,EAAeH,CAAO,CAClD,CAEA,SAASG,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASH,EAAUI,EAAI,CAQrB,MAAMR,EAAO,KAAK,MAAMQ,EAAK,KAAG,EAE1BP,EAAQ,KAAK,MAAOO,EAAK,MAAO,IAAI,EAEpCN,EAAU,KAAK,MAAQM,EAAK,MAAO,KAAQ,GAAM,EAEjDL,EAAU,KAAK,MAASK,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}